<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- https://realfavicongenerator.net -->
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
  <link rel="manifest" href="/assets/favicon/site.webmanifest">
  <link rel="mask-icon" href="/assets/favicon/safari-pinned-tab.svg" color="#314cb3">
  <link rel="shortcut icon" href="/assets/favicon/favicon.ico">
  <meta name="msapplication-TileColor" content="#2d89ef">
  <meta name="msapplication-config" content="/assets/favicon/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">

  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>

  <title>
    Technical Labs
  </title>

  <link rel="stylesheet" href="/assets/css/main.css" />
</head>



  <body>
    <script src="/assets/js/navbar.js" ></script>

<nav id="nav">
  <div id="bar-nav">
    <a href="/" id="logo">Technical Labs</a>
    <div id="nav-spacer" ></div>
    <span class="nav-link"><a href="/notes/2020/">2020 notes</a></span>
    <span class="nav-link"><a href="/notes/2021/">2021 notes</a></span>
  </div>

  <div id="dropdown-nav">
    <div id="dropdown-nav-bar">
      <a href="/" id="logo">Technical Labs</a>
      <div id="nav-spacer" ></div>
      <input type="checkbox" id="menu-icon">
      <label id="menu-label" for="menu-icon" onclick="handleDropdownToggle"></label>
    </div>

    <div id="dropdown-content">
      <span class="nav-link"><a href="/notes/2020/">2020 notes</a></span>
      <span class="nav-link"><a href="/notes/2021/">2021 notes</a></span>
    </div>
  </div>
</nav>


    <div id="content">
      <div id="note_container">
        <h1> SSH </h1>
<p> 17 November 2020 </p>

<p>Find the video for these notes 
<a href="https://www.youtube.com/watch?v=RGatj96-ooc">here</a></p>

<h2 id="table-of-contents">Table of Contents</h2>

<ol>
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#what-is-ssh">What is SSH</a></li>
  <li><a href="#using-ssh">Using SSH</a></li>
  <li><a href="#how-does-ssh-work">How does SSH work?</a></li>
  <li><a href="#configuring-ssh">Configuring SSH</a></li>
  <li><a href="#connecting-to-linuxbath-with-ssh">Connecting to <code class="language-plaintext highlighter-rouge">linux.bath</code> with SSH</a></li>
  <li><a href="#exercises">Exercises</a></li>
  <li><a href="#credit">Credit</a></li>
</ol>

<h2 id="introduction">Introduction</h2>

<p>SSH is an extremely widely used tool for connecting to remote computers. In this
lab we are going to give a basic introduction to what SSH is, how it works, how 
to use it, and then an example of how to setup SSH for <code class="language-plaintext highlighter-rouge">linux.bath</code>.</p>

<h2 id="what-is-ssh">What is SSH</h2>

<p>SSH stands for <strong>S</strong>ecure <strong>Sh</strong>ell, and is a cryptographic network protocol for 
communicating securely over unsecured networks. SSH can be used to secure any 
network service but most commonly is used for remote command 
line access, login, remote command execution and file transfer. These are what 
we will focus on here.</p>

<p>Put more simply, SSH can do many things, but we’re going to use it to open and 
access a commandline shell on a remote computer, usually a server. This will 
typically be a Unix-shell which was covered in a previous lab you can access 
<a href="Unix_Shell.md">here</a>.</p>

<p>SSH is now supported by all the major desktop operating systems (Windows 10, 
macOS, the majority of Linux distros) and the vast majority of networking 
equipment supports SSH for remote management. Indeed most servers are controlled
via SSH.</p>

<h2 id="using-ssh">Using SSH</h2>

<p>The most common SSH client is <code class="language-plaintext highlighter-rouge">OpenSSH</code>. It comes installed by default on 
Windows 10, macOS, and most Linux distros, so it is the tool we will be covering
here.</p>

<p>To open a SSH remote commandline connection in OpenSSH we use the command 
<code class="language-plaintext highlighter-rouge">ssh [address]</code> where <code class="language-plaintext highlighter-rouge">address</code> is the address of the server you want to connect 
to. Unless you have a configuration set for this address, OpenSSH will try to 
login with your current username. If that’s not the behaviour you want you can 
specify what username to use to login with by using the command 
<code class="language-plaintext highlighter-rouge">ssh [user]@[address]</code> where <code class="language-plaintext highlighter-rouge">user</code> is your username. When you connect you
may be prompted for a password.</p>

<p>Alternatively you can execute a single command on a remote computer with the 
command <code class="language-plaintext highlighter-rouge">ssh ([user]@)[server] [command]</code>. OpenSSH will show you the result of 
the command.</p>

<p>To transfer files with OpenSSH you need to use a different program - the SSH copy
program <code class="language-plaintext highlighter-rouge">scp</code>.</p>

<p>To send a file to a remote computer use the command 
<code class="language-plaintext highlighter-rouge">scp [file] ([user]@)[address]:[path]</code>, where <code class="language-plaintext highlighter-rouge">file</code> is the file you want to 
send, and <code class="language-plaintext highlighter-rouge">path</code> is the directory where you want to save it on the remote 
computer. This may look a bit confusing, but later we’ll show an example.</p>

<p>To copy a file from the remote computer use the command 
<code class="language-plaintext highlighter-rouge">scp ([user]@)[address]:[file] [path]</code>, where <code class="language-plaintext highlighter-rouge">file</code> is the file you want to copy
from the remote computer and <code class="language-plaintext highlighter-rouge">path</code> is where you want to store it locally.</p>

<p>For both directions of <code class="language-plaintext highlighter-rouge">scp</code> you can add the <code class="language-plaintext highlighter-rouge">-r</code> command and specify a 
directory instead of a file - this will then recursively copy the directory and 
all its contents.</p>

<h2 id="how-does-ssh-work">How does SSH work</h2>

<p>SSH is a protocol which many tools use. The protocol is structured into different layers, 
where each layer uses the previous layer to communicate.</p>

<p>The first layer is the <strong>Transport Layer</strong>. When you start an SSH connection this 
layer connects to the remote computer and sets up an encrypted secure 
connection between the two computers.</p>

<p>Next is the <strong>User Authentication Layer</strong>, which handles client authentication. This
can either be with a password or with cryptographic private and public keys.</p>

<p>The last layer is the <strong>Connection Layer</strong>. This layer carries the <code class="language-plaintext highlighter-rouge">channels</code> of 
information. You could have a shell channel, carrying input and output back and 
forth, or it could be a file transfer channel, or many other types.</p>

<p>SSH also defaults to connecting over port 22. This can be changed if 
needed.</p>

<h2 id="configuring-ssh">Configuring SSH</h2>

<p>SSH allows you to configure some of its default behaviours. On Unix-like machines the configuration files are stored in <code class="language-plaintext highlighter-rouge">~/.ssh/config</code>.</p>

<p>If you have servers you have to access often you can make custom configurations 
for them by adding a <code class="language-plaintext highlighter-rouge">Host [name]</code> block. You can then add sections specifying the
username you want to use, and the hostname. Here you can also specify the 
cryptographic key if you’re using it for authentication. The block for a server 
will probably look something like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Host MyServer
    Hostname 139.161.208.134
    User myUser
</code></pre></div></div>

<p>You can also specify many more options that can be found in the ssh <code class="language-plaintext highlighter-rouge">man</code> page.</p>

<h2 id="connecting-to-linuxbath-with-ssh">Connecting to <code class="language-plaintext highlighter-rouge">linux.bath</code> with SSH</h2>

<p><code class="language-plaintext highlighter-rouge">linux.bath.ac.uk</code> is an Ubuntu server setup for Bath students and staff. You 
can login with your university username and password. In this example I’m going 
to upload a Java file to <code class="language-plaintext highlighter-rouge">linux.bath</code>. I’ll then login to <code class="language-plaintext highlighter-rouge">linux.bath</code>, compile 
the code and run it. I’ll save the output of the program and then copy it back 
to my computer.</p>

<p>For this I will also assume a little bit of knowledge about some file management
commands in Unix. To learn more about that look at our first lab.</p>

<p>The program is available 
<a href="https://javatutoring.com/gcd-of-two-numbers-java-program/">here</a>. It calculates
the greatest common divisor of two numbers.</p>

<p>Firstly, I want to create a directory on the server. To do this I can do the remote 
execution of a command - 
<code class="language-plaintext highlighter-rouge">ssh ar2227@linux.bath.ac.uk "mkdir gcdFile"</code></p>

<p><img src="/assets/ssh_lab/01remote_command.png" alt="Remote execution example" /></p>

<p>Note it’s now prompting me for my password.</p>

<p>Next, I’m going to use <code class="language-plaintext highlighter-rouge">scp</code> to copy my code to the server. To do this I use the
command <code class="language-plaintext highlighter-rouge">scp Gcd.java ar2227@linux.bath.ac.uk:gcdFile</code>.</p>

<p><img src="/assets/ssh_lab/02scp_send.png" alt="Send file to server example" /></p>

<p>Then I need to open a remote shell on the server, compile my code, run it, 
and save the output. To open the shell I’m going to run 
<code class="language-plaintext highlighter-rouge">ssh ar2227@linux.bath.ac.uk</code>.</p>

<p><img src="/assets/ssh_lab/03ssh_ex.png" alt="SSH to server example" /></p>

<p>Then I’m going to copy the output file to my local computer with 
<code class="language-plaintext highlighter-rouge">scp ar2227@linux.bath.ac.uk:gcdFile/output.txt .</code>.</p>

<p><img src="/assets/ssh_lab/04scp_retrieve.png" alt="Retrieve file from server example" /></p>

<p>And we’re done! We successfully used the remote server to compile and run our code.</p>

<h2 id="exercises">Exercises</h2>

<ol>
  <li>Connect to <code class="language-plaintext highlighter-rouge">linux.bath</code> and have a look around, there will already be some 
files in there that come by default.</li>
  <li>Copy some files to and from <code class="language-plaintext highlighter-rouge">linux.bath</code>. You will be able to see them on the
<a href="files.bath.ac.uk">Bath files explorer website</a>.</li>
  <li>Look into using cryptographic keys for authentication. See if you can set one
up for GitHub or some other server. (<code class="language-plaintext highlighter-rouge">linux.bath</code> does not support it).</li>
  <li>Connect to <code class="language-plaintext highlighter-rouge">linux.bath</code> and run <code class="language-plaintext highlighter-rouge">mkhome</code> to setup your <a href="people.bath.ac.uk">Bath people 
page</a>. You can get to your page at 
<code class="language-plaintext highlighter-rouge">people.bath.ac.uk/[username]/</code></li>
</ol>

<h2 id="credit">Credit</h2>

<p>SSH research came from <a href="https://www.ssh.com">SSH.com</a> which is a great website 
setup by the creator of SSH and from 
<a href="https://en.wikipedia.org/wiki/SSH_(Secure_Shell)">Wikipedia</a>.</p>

<p>Written by <a href="www.alfierichards.com">Alfie Richards</a>.</p>

<p>Edited by <a href="mailto:jcryer1234@gmail.com">Joe Cryer</a></p>

<p>Additional help from:</p>

<ul>
  <li>Dr Russell Bradford</li>
  <li><a href="https://neros.dev">Søren Mortensen</a></li>
</ul>

<p>Please sent any corrections <a href="mailto:main@alfierichards.com">here</a></p>



      </div>
    </div>

    <div id="footer">
  <div id="footer_content">
    <p>Site made by <a href="mailto:main@alfierichards.com">Alfie Richards</a> for <a href="https://www.thesubath.com/bcss/">Bath Computer Science Society</a> and the Bath Computer Science Department.</p>
    <p>View the <a href="https://github.com/bath-bcss/Technical-Labs">source code</a>.</p>
    <p>Licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode">CC BY-NC-SA</a>.</p>
  </div>
  <img id="bcss_footer_logo" src="/assets/logo_full_no_bg.png"/>
</div>

  </body>
</html>
